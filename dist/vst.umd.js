(function(e,g){typeof exports=="object"&&typeof module<"u"?module.exports=g(require("vue")):typeof define=="function"&&define.amd?define(["vue"],g):(e=typeof globalThis<"u"?globalThis:e||self,e.VueSlimTable=g(e.Vue))})(this,function(e){"use strict";const g="",B=["colspan"],S=[e.createElementVNode("div",null,null,-1)],V=e.defineComponent({__name:"loading_row",props:{columnsLength:{type:Number,required:!0}},setup(m){const p=Math.floor(Math.random()*10)+1;return(o,l)=>(e.openBlock(),e.createElementBlock("tr",null,[e.createElementVNode("td",{colspan:m.columnsLength,class:e.normalizeClass(["vst-loading-row",`vst-loading-row-${p}`])},S,10,B)]))}}),a={INITIAL:"initial",SYNCING:"syncing",SYNCED:"synced",FAILED:"failed"},C=({initialFilters:m,loadItems:p})=>{const o=e.ref(1),l=e.reactive({value:[]}),r=e.ref(a.INITIAL),h=e.reactive({value:m}),i=e.computed(()=>({page:o.value,...h.value})),s=()=>(r.value=a.SYNCING,p(i.value).then(k=>{l.value=k,r.value=a.SYNCED}).catch(()=>{l.value=[],r.value=a.FAILED}));return s(),e.watch(i,s),{page:o,items:l,syncState:r,nextPage:()=>{o.value+=1},prevPage:()=>{o.value-=1},isSyncing:e.computed(()=>r.value===a.SYNCING),isSynced:e.computed(()=>r.value===a.SYNCED),isFailed:e.computed(()=>r.value===a.FAILED),reload:()=>{s()},refetch:()=>{o.value===1?s():o.value=1}}},$={class:"vst"},_={key:0},b={key:0},I=["colspan"],F=["colspan"],L={key:0,class:"vst-pagination mt-3"};return e.defineComponent({__name:"slim_table",props:{columns:{},source:{},perPage:{default:25}},setup(m,{expose:p}){const o=m,l=e.shallowRef({}),r=async t=>{let d=[];try{d=await o.source(t)}catch{}return d},h=t=>{l.value[t]==="asc"?l.value={[t]:"desc"}:l.value[t]==="desc"?l.value={}:l.value={[t]:"asc"}},{page:i,isSyncing:s,isSynced:k,prevPage:y,nextPage:E,reload:u,refetch:w,items:c}=C({initialFilters:{per_page:o.perPage,orders:l.value},loadItems:r});return p({refetch:w,reload:u,rows:c}),(t,d)=>(e.openBlock(),e.createElementBlock("table",$,[t.columns.length?(e.openBlock(),e.createElementBlock("thead",_,[e.renderSlot(t.$slots,"thead",{columns:t.columns,orders:l.value},()=>[e.createElementVNode("tr",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.columns,n=>(e.openBlock(),e.createElementBlock("th",e.mergeProps({key:n.key,class:["vst-th",{"vst-orderable":n.orderable}]},e.toHandlers(n.orderable?{click:()=>h(n.key)}:{},!0)),[n.orderable?(e.openBlock(),e.createElementBlock("div",b,[e.renderSlot(t.$slots,`thead:${n.key}`,{column:n},()=>[e.createTextVNode(e.toDisplayString(n.title),1)]),e.createElementVNode("a",{href:"#",class:e.normalizeClass(["vst-orderable-toggle",l.value[n.key]])},null,2)])):e.renderSlot(t.$slots,`thead:${n.key}`,{key:1,column:n},()=>[e.createTextVNode(e.toDisplayString(n.title),1)])],16))),128))])])])):e.createCommentVNode("",!0),e.createElementVNode("tbody",null,[e.unref(s)?e.renderSlot(t.$slots,"row:loading",{key:0},()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.perPage,n=>(e.openBlock(),e.createBlock(V,{key:`loadingRow${n}`,"columns-length":t.columns.length},null,8,["columns-length"]))),128))]):e.unref(k)&&e.unref(c).value.length===0?e.renderSlot(t.$slots,"row:empty",{key:1},()=>[e.createElementVNode("tr",null,[e.createElementVNode("td",{colspan:t.columns.length}," No records found ",8,I)])]):e.unref(k)&&e.unref(c).value.length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:2},e.renderList(e.unref(c).value,(n,N)=>e.renderSlot(t.$slots,"row",{row:n,index:N,columns:t.columns},()=>[(e.openBlock(),e.createElementBlock("tr",{key:n.id||N},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.columns,f=>(e.openBlock(),e.createElementBlock("td",{key:f.key},[e.renderSlot(t.$slots,`cell:${f.key}`,{row:n,value:n[f.key],column:f,index:N},()=>[e.createTextVNode(e.toDisplayString(n[f.key]),1)])]))),128))]))])),256)):e.createCommentVNode("",!0)]),e.createElementVNode("tfoot",null,[e.createElementVNode("tr",null,[e.createElementVNode("td",{colspan:t.columns.length},[e.renderSlot(t.$slots,"pagination",{page:e.unref(i),rows:e.unref(c).value},()=>[e.unref(i)>1||e.unref(c).value.length===t.perPage||e.unref(s)?(e.openBlock(),e.createElementBlock("ul",L,[e.createElementVNode("li",{class:e.normalizeClass(["vst-page-item",{disabled:e.unref(i)===1||e.unref(s)}])},[e.createElementVNode("a",{class:"vst-page-link",onClick:d[0]||(d[0]=e.withModifiers((...n)=>e.unref(y)&&e.unref(y)(...n),["prevent"]))},"←")],2),e.createElementVNode("li",{class:e.normalizeClass(["vst-page-item",{disabled:e.unref(c).value.length<t.perPage||e.unref(s)}])},[e.createElementVNode("a",{class:"vst-page-link",onClick:d[1]||(d[1]=e.withModifiers((...n)=>e.unref(E)&&e.unref(E)(...n),["prevent"]))},"→")],2)])):e.createCommentVNode("",!0)])],8,F)])])]))}})});
//# sourceMappingURL=vst.umd.js.map
