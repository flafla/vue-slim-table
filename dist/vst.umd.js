(function(e,k){typeof exports=="object"&&typeof module<"u"?module.exports=k(require("vue")):typeof define=="function"&&define.amd?define(["vue"],k):(e=typeof globalThis<"u"?globalThis:e||self,e.VueSlimTable=k(e.Vue))})(this,function(e){"use strict";const k="",S=["colspan"],B=[e.createElementVNode("div",null,null,-1)],V=e.defineComponent({__name:"loading_row",props:{columnsLength:{type:Number,required:!0}},setup(p){const m=Math.floor(Math.random()*10)+1;return(r,n)=>(e.openBlock(),e.createElementBlock("tr",null,[e.createElementVNode("td",{colspan:p.columnsLength,class:e.normalizeClass(["vst-loading-row",`vst-loading-row-${m}`])},B,10,S)]))}}),c={INITIAL:"initial",SYNCING:"syncing",SYNCED:"synced",FAILED:"failed"},$=({initialFilters:p,loadItems:m})=>{const r=e.ref(1),n=e.reactive({value:[]}),s=e.ref(c.INITIAL),h=e.reactive({value:p}),i=e.computed(()=>({page:r.value,...h.value})),a=async()=>{s.value=c.SYNCING;try{n.value=await m(i.value),s.value=c.SYNCED}catch{n.value=[],s.value=c.FAILED}};return a(),e.watch(i,a),{page:r,items:n,syncState:s,nextPage:()=>{r.value+=1},prevPage:()=>{r.value-=1},isSyncing:e.computed(()=>s.value===c.SYNCING),isSynced:e.computed(()=>s.value===c.SYNCED),isFailed:e.computed(()=>s.value===c.FAILED),reload:()=>{a()},refetch:()=>{r.value===1?a():r.value=1}}},C={class:"vst"},b={key:0},I={key:0},_=["colspan"],F=["colspan"],w={key:0,class:"vst-pagination mt-3"};return e.defineComponent({__name:"slim_table",props:{columns:{},perPage:{},source:{type:Function}},setup(p,{expose:m}){const r=p,n=e.shallowRef({}),s=async t=>{let o=[];try{o=await r.source(t)}catch{}return o},h=(t,o)=>{t.preventDefault(),n.value[o]==="asc"?n.value={[o]:"desc"}:n.value[o]==="desc"?n.value={}:n.value={[o]:"asc"}},{page:i,isSyncing:a,isSynced:y,prevPage:N,nextPage:E,reload:L,refetch:D,items:d}=$({initialFilters:{per_page:r.perPage,orders:n},loadItems:s});return m({refetch:D,reload:L,rows:d}),(t,o)=>(e.openBlock(),e.createElementBlock("table",C,[t.columns.length?(e.openBlock(),e.createElementBlock("thead",b,[e.renderSlot(t.$slots,"thead:before"),e.renderSlot(t.$slots,"thead",{columns:t.columns,orders:n.value},()=>[e.createElementVNode("tr",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.columns,l=>(e.openBlock(),e.createElementBlock("th",e.mergeProps({key:l.key,class:["vst-th",{"vst-orderable":l.orderable}]},e.toHandlers(l.orderable?{click:f=>h(f,l.key)}:{},!0)),[l.orderable?(e.openBlock(),e.createElementBlock("div",I,[e.renderSlot(t.$slots,`thead:${l.key}`,{column:l,orders:n.value},()=>[e.createTextVNode(e.toDisplayString(l.title),1)]),e.createElementVNode("i",{class:e.normalizeClass(["vst-orderable-toggle",n.value[l.key]])},null,2)])):e.renderSlot(t.$slots,`thead:${l.key}`,{key:1,column:l,orders:n.value},()=>[e.createTextVNode(e.toDisplayString(l.title),1)])],16))),128))])]),e.renderSlot(t.$slots,"thead:after")])):e.createCommentVNode("",!0),e.createElementVNode("tbody",null,[e.unref(a)?e.renderSlot(t.$slots,"row:loading",{key:0},()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.perPage,l=>(e.openBlock(),e.createBlock(V,{key:`loadingRow${l}`,"columns-length":t.columns.length},null,8,["columns-length"]))),128))]):e.unref(y)&&e.unref(d).value.length===0?e.renderSlot(t.$slots,"row:empty",{key:1},()=>[e.createElementVNode("tr",null,[e.createElementVNode("td",{colspan:t.columns.length}," No records found ",8,_)])]):e.unref(y)&&e.unref(d).value.length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:2},e.renderList(e.unref(d).value,(l,f)=>e.renderSlot(t.$slots,"row",{row:l,index:f,columns:t.columns},()=>[(e.openBlock(),e.createElementBlock("tr",{key:l.id||f},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.columns,g=>(e.openBlock(),e.createElementBlock("td",{key:g.key},[e.renderSlot(t.$slots,`cell:${g.key}`,{row:l,value:l[g.key],column:g,index:f},()=>[e.createTextVNode(e.toDisplayString(l[g.key]),1)])]))),128))]))])),256)):e.createCommentVNode("",!0)]),e.createElementVNode("tfoot",null,[e.createElementVNode("tr",null,[e.createElementVNode("td",{colspan:t.columns.length},[e.renderSlot(t.$slots,"pagination",{page:e.unref(i),rows:e.unref(d).value},()=>[e.unref(i)>1||e.unref(d).value.length===t.perPage||e.unref(a)?(e.openBlock(),e.createElementBlock("ul",w,[e.createElementVNode("li",{class:e.normalizeClass(["vst-page-item",{disabled:e.unref(i)===1||e.unref(a)}])},[e.createElementVNode("a",{class:"vst-page-link",onClick:o[0]||(o[0]=e.withModifiers((...l)=>e.unref(N)&&e.unref(N)(...l),["prevent"]))},"←")],2),e.createElementVNode("li",{class:e.normalizeClass(["vst-page-item",{disabled:e.unref(d).value.length<t.perPage||e.unref(a)}])},[e.createElementVNode("a",{class:"vst-page-link",onClick:o[1]||(o[1]=e.withModifiers((...l)=>e.unref(E)&&e.unref(E)(...l),["prevent"]))},"→")],2)])):e.createCommentVNode("",!0)])],8,F)])])]))}})});
//# sourceMappingURL=vst.umd.js.map
