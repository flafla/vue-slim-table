var M=Object.defineProperty;var $=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var C=(e,s,c)=>s in e?M(e,s,{enumerable:!0,configurable:!0,writable:!0,value:c}):e[s]=c,V=(e,s)=>{for(var c in s||(s={}))x.call(s,c)&&C(e,c,s[c]);if($)for(var c of $(s))G.call(s,c)&&C(e,c,s[c]);return e};(function(e,s){typeof exports=="object"&&typeof module!="undefined"?module.exports=s(require("vue")):typeof define=="function"&&define.amd?define(["vue"],s):(e=typeof globalThis!="undefined"?globalThis:e||self,e.VueSlimTable=s(e.Vue))})(this,function(e){"use strict";var s="";const c=["colspan"],b=[e.createElementVNode("div",null,null,-1)],I=e.defineComponent({props:{columnsLength:{type:Number,required:!0}},setup(n){const m=Math.floor(Math.random()*10)+1;return(l,a)=>(e.openBlock(),e.createElementBlock("tr",null,[e.createElementVNode("td",{colspan:n.columnsLength,class:e.normalizeClass(["vst-loading-row",`vst-loading-row-${m}`])},b,10,c)]))}}),k={INITIAL:"initial",SYNCING:"syncing",SYNCED:"synced",FAILED:"failed"},u=({initialFilters:n,loadItems:m})=>{const l=e.ref(1),a=e.reactive({value:[]}),r=e.ref(k.INITIAL),h=e.isReactive(n)?n:e.reactive({value:n}),d=e.computed(()=>V({page:l.value},h.value)),i=()=>(r.value=k.SYNCING,m(d.value).then(y=>{a.value=y,r.value=k.SYNCED}).catch(()=>{a.value=[],r.value=k.FAILED}));return e.watch(d,i),i(),{page:l,items:a,syncState:r,nextPage:()=>{l.value+=1},prevPage:()=>{l.value-=1},isSyncing:e.computed(()=>r.value===k.SYNCING),isSynced:e.computed(()=>r.value===k.SYNCED),isFailed:e.computed(()=>r.value===k.FAILED),reload:()=>{i()},refetch:()=>{l.value===1?i():l.value=1}}},E=(n,m)=>(l,[a,r])=>{if(r==null)return l;const h=encodeURIComponent(a),d=m?`${m}[${h}]`:h;return["number","string"].includes(typeof r)?(l.push(`${d}=${encodeURIComponent(r)}`),l):(l.push(Object.entries(r).reduce(E(r,d),[]).join("&")),l)};var w=n=>Object.entries(n).reduce(E(),[]).join("&");const L={class:"vst"},D={key:0},T=["onClick"],F={key:0},P=["colspan"],j=["colspan"],Y={key:0,class:"vst-pagination mt-3"};return e.defineComponent({props:{columns:null,source:null,perPage:{default:25}},setup(n,{expose:m}){const l=n,a=e.shallowRef({}),r=async o=>{let f;return typeof l.source=="string"?f=await(await fetch(`${l.source}?${w(o)}`)).json():f=await l.source(o),f},h=o=>{a.value[o]==="asc"?a.value={[o]:"desc"}:a.value[o]==="desc"?a.value={}:a.value={[o]:"asc"}},{page:d,isSyncing:i,isSynced:y,prevPage:B,nextPage:S,reload:z,refetch:R,items:g}=u({initialFilters:{per_page:l.perPage,orders:a},loadItems:r});return m({refetch:R,reload:z,rows:g}),(o,f)=>(e.openBlock(),e.createElementBlock("table",L,[n.columns.length?(e.openBlock(),e.createElementBlock("thead",D,[e.renderSlot(o.$slots,"thead:before",{columns:n.columns}),e.createElementVNode("tr",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.columns,t=>(e.openBlock(),e.createElementBlock("th",{key:t.key,class:e.normalizeClass(["vst-th",{"vst-orderable":t.orderable}]),onClick:N=>t.orderable?h(t.key):null},[t.orderable?(e.openBlock(),e.createElementBlock("div",F,[e.renderSlot(o.$slots,`head:${t.key}`,{column:t},()=>[e.createTextVNode(e.toDisplayString(t.title),1)]),t.orderable?(e.openBlock(),e.createElementBlock("a",{key:0,href:"#",class:e.normalizeClass(["vst-orderable-toggle",e.unref(a)[t.key]])},null,2)):e.createCommentVNode("",!0)])):e.renderSlot(o.$slots,`head:${t.key}`,{key:1,column:t},()=>[e.createTextVNode(e.toDisplayString(t.title),1)])],10,T))),128))]),e.renderSlot(o.$slots,"thead:after",{columns:n.columns})])):e.createCommentVNode("",!0),e.createElementVNode("tbody",null,[e.unref(i)?e.renderSlot(o.$slots,"row:loading",{key:0},()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.perPage,t=>(e.openBlock(),e.createBlock(I,{key:`loadingRow${t}`,"columns-length":n.columns.length},null,8,["columns-length"]))),128))]):e.unref(y)&&e.unref(g).value.length===0?e.renderSlot(o.$slots,"row:empty",{key:1},()=>[e.createElementVNode("tr",null,[e.createElementVNode("td",{colspan:n.columns.length}," No records found ",8,P)])]):e.unref(y)&&e.unref(g).value.length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:2},e.renderList(e.unref(g).value,(t,N)=>e.renderSlot(o.$slots,"row",{row:t,index:N,columns:n.columns},()=>[(e.openBlock(),e.createElementBlock("tr",{key:t.id||N},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.columns,p=>(e.openBlock(),e.createElementBlock("td",{key:p.key},[e.renderSlot(o.$slots,`cell:${p.key}`,{row:t,value:t[p.key],column:p,index:N},()=>[e.createTextVNode(e.toDisplayString(t[p.key]),1)])]))),128))]))])),256)):e.createCommentVNode("",!0)]),e.createElementVNode("tfoot",null,[e.createElementVNode("tr",null,[e.createElementVNode("td",{colspan:n.columns.length},[e.renderSlot(o.$slots,"pagination",{page:e.unref(d),rows:e.unref(g).value},()=>[e.unref(d)>1||e.unref(g).value.length===n.perPage||e.unref(i)?(e.openBlock(),e.createElementBlock("ul",Y,[e.createElementVNode("li",{class:e.normalizeClass(["vst-page-item",{disabled:e.unref(d)===1||e.unref(i)}])},[e.createElementVNode("a",{class:"vst-page-link",onClick:f[0]||(f[0]=e.withModifiers((...t)=>e.unref(B)&&e.unref(B)(...t),["prevent"]))},"\u2190")],2),e.createElementVNode("li",{class:e.normalizeClass(["vst-page-item",{disabled:e.unref(g).value.length<n.perPage||e.unref(i)}])},[e.createElementVNode("a",{class:"vst-page-link",onClick:f[1]||(f[1]=e.withModifiers((...t)=>e.unref(S)&&e.unref(S)(...t),["prevent"]))},"\u2192")],2)])):e.createCommentVNode("",!0)])],8,j)])])]))}})});
//# sourceMappingURL=vst.umd.js.map
