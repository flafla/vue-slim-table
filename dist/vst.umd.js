(function(e,g){typeof exports=="object"&&typeof module<"u"?module.exports=g(require("vue")):typeof define=="function"&&define.amd?define(["vue"],g):(e=typeof globalThis<"u"?globalThis:e||self,e.VueSlimTable=g(e.Vue))})(this,function(e){"use strict";const g="",B=["colspan"],V=[e.createElementVNode("div",null,null,-1)],C=e.defineComponent({__name:"loading_row",props:{columnsLength:{type:Number,required:!0}},setup(i){const p=Math.floor(Math.random()*10)+1;return(o,l)=>(e.openBlock(),e.createElementBlock("tr",null,[e.createElementVNode("td",{colspan:i.columnsLength,class:e.normalizeClass(["vst-loading-row",`vst-loading-row-${p}`])},V,10,B)]))}}),a={INITIAL:"INITIAL",SYNCING:"SYNCING",SYNCED:"SYNCED",FAILED:"FAILED"},$=({initialFilters:i,loadItems:p})=>{const o=e.ref(1),l=e.ref([]),s=e.ref(a.INITIAL),c=async()=>{s.value=a.SYNCING;try{l.value=await p({...i.value,page:o.value}),s.value=a.SYNCED}catch{l.value=[],s.value=a.FAILED}};return e.watch(i,c),e.watch(o,c),c(),{page:o,items:l,syncState:s,isSyncing:e.computed(()=>s.value===a.SYNCING),isSynced:e.computed(()=>s.value===a.SYNCED),isFailed:e.computed(()=>s.value===a.FAILED),nextPage:()=>{o.value+=1},prevPage:()=>{o.value-=1},setPage:h=>{o.value=h},reload:c,refetch:()=>{o.value===1?c():o.value=1}}},I={class:"vst"},b={key:0},L={key:0},_=["colspan"],w=["colspan"],D={key:0,class:"vst-pagination"};return e.defineComponent({__name:"slim_table",props:{columns:{},perPage:{default:25},source:{}},setup(i,{expose:p}){const o=i,l=e.shallowRef({}),s=async t=>{let r=[];try{r=await o.source(t)}catch{}return r},c=(t,r)=>{t.preventDefault(),l.value[r]==="asc"?l.value={[r]:"desc"}:l.value[r]==="desc"?l.value={}:l.value={[r]:"asc"}},h=e.computed(()=>({per_page:o.perPage,orders:l})),{page:N,isSyncing:k,isSynced:E,prevPage:y,nextPage:S,reload:P,refetch:T,items:d}=$({initialFilters:h,loadItems:s});return p({refetch:T,reload:P,rows:d}),(t,r)=>(e.openBlock(),e.createElementBlock("table",I,[t.columns.length?(e.openBlock(),e.createElementBlock("thead",b,[e.renderSlot(t.$slots,"thead:before"),e.renderSlot(t.$slots,"thead",{columns:t.columns,orders:l.value},()=>[e.createElementVNode("tr",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.columns,n=>(e.openBlock(),e.createElementBlock("th",e.mergeProps({key:n.key,class:["vst-th",{"vst-orderable":n.orderable}]},e.toHandlers(n.orderable?{click:m=>c(m,n.key)}:{},!0)),[n.orderable?(e.openBlock(),e.createElementBlock("div",L,[e.renderSlot(t.$slots,`thead:${n.key}`,{column:n,orders:l.value},()=>[e.createTextVNode(e.toDisplayString(n.title),1)]),e.createElementVNode("i",{class:e.normalizeClass(["vst-orderable-toggle",l.value[n.key]])},null,2)])):e.renderSlot(t.$slots,`thead:${n.key}`,{key:1,column:n,orders:l.value},()=>[e.createTextVNode(e.toDisplayString(n.title),1)])],16))),128))])]),e.renderSlot(t.$slots,"thead:after")])):e.createCommentVNode("",!0),e.createElementVNode("tbody",null,[e.unref(k)?e.renderSlot(t.$slots,"row:loading",{key:0},()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.perPage,n=>(e.openBlock(),e.createBlock(C,{key:`loadingRow${n}`,"columns-length":t.columns.length},null,8,["columns-length"]))),128))]):e.unref(E)&&e.unref(d).length===0?e.renderSlot(t.$slots,"row:empty",{key:1},()=>[e.createElementVNode("tr",null,[e.createElementVNode("td",{colspan:t.columns.length}," No records found ",8,_)])]):e.unref(E)&&e.unref(d).length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:2},e.renderList(e.unref(d),(n,m)=>e.renderSlot(t.$slots,"row",{row:n,index:m,columns:t.columns},()=>[(e.openBlock(),e.createElementBlock("tr",{key:n.id||m},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.columns,f=>(e.openBlock(),e.createElementBlock("td",{key:f.key},[e.renderSlot(t.$slots,`cell:${f.key}`,{row:n,value:n[f.key],column:f,index:m},()=>[e.createTextVNode(e.toDisplayString(n[f.key]),1)])]))),128))]))])),256)):e.createCommentVNode("",!0)]),e.createElementVNode("tfoot",null,[e.createElementVNode("tr",null,[e.createElementVNode("td",{colspan:t.columns.length},[e.renderSlot(t.$slots,"pagination",{page:e.unref(N),rows:e.unref(d)},()=>[e.unref(N)>1||e.unref(d).length===t.perPage||e.unref(k)?(e.openBlock(),e.createElementBlock("ul",D,[e.createElementVNode("li",{class:e.normalizeClass(["vst-page-item",{disabled:e.unref(N)===1||e.unref(k)}])},[e.createElementVNode("a",{class:"vst-page-link",onClick:r[0]||(r[0]=e.withModifiers((...n)=>e.unref(y)&&e.unref(y)(...n),["prevent"]))},"←")],2),e.createElementVNode("li",{class:e.normalizeClass(["vst-page-item",{disabled:e.unref(d).length<t.perPage||e.unref(k)}])},[e.createElementVNode("a",{class:"vst-page-link",onClick:r[1]||(r[1]=e.withModifiers((...n)=>e.unref(S)&&e.unref(S)(...n),["prevent"]))},"→")],2)])):e.createCommentVNode("",!0)])],8,w)])])]))}})});
//# sourceMappingURL=vst.umd.js.map
